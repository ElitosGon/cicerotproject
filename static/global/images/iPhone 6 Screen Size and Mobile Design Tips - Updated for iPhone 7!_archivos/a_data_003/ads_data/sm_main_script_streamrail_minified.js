function printLogs(a){sminternalconfig.logs&&console.log(a)}function printErrors(a){sminternalconfig.logs&&console.error(a)}function getShortString(a,b){return a.length>=b&&(a=a.substring(0,b-3),a+="EOS"),a}function smCreateObjectContainsValues(a,b){var c={};for(var d in a)0==d.indexOf(b)&&(c[d]=a[d]);return c}function createSessionId(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;d<a;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b}function smConvertObjectToString(a){for(var b="",c=Object.keys(a),d=0;d<c.length;d++)b=b+c[d]+"="+a[c[d]]+"&";return b}function getServingScenarioType(){try{if(window.top==window)return"OnPage";for(var a=window;a.parent!=a;){if(a.parent.document.domain!=a.document.domain)return"CrossDomainIframe";a=a.parent}return"SameDomainIframe"}catch(a){}return"CrossDomainIframe"}function smCallURL(a){printLogs("Start sending request: "+a);try{var b=a;b=getShortString(b,sminternalconfig.maxUrlSize);var c=document.createElement("script");c.type="text/javascript",c.async=!0,c.src=b;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d),printLogs("Finished sending request: "+a)}catch(b){smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+" smCallURL:"+b,printErrors("Error while get smCallURL , url: "+a+", error: "+b)}}function getConsoleSummary(){return res="",smcounters.counterErrors>0&&(res=res+" Errors:"+smcounters.counterErrors),smcounters.counterWarnings>0&&(res=res+" Warnings:"+smcounters.counterWarnings),smcounters.counterLogs>0&&(res=res+" Logs:"+smcounters.counterLogs),smcounters.windowError>0&&(res=res+" windowErrors:"+smcounters.windowError),res}function smReportThirdPartyPixel(a){"IMPRESSION"==a&&0==smoperational.impressionPixel.indexOf("http")?smCallURL(smoperational.impressionPixel):"COMPLETE"==a&&0==smoperational.completePixel.indexOf("http")?smCallURL(smoperational.completePixel):"AD_CLICK"==a&&0==smoperational.clickPixel.indexOf("http")&&smCallURL(smoperational.clickPixel)}function updatesmTagsObjects(a,b){"IMPRESSION"==b?(smTagsObjects[a].imptime=(new Date).getTime(),smTagsObjects[a].impressions++,smTagsObjects[a].latency=smTagsObjects[a].imptime-smTagsObjects[a].starttime):"COMPLETE"==b?(smTagsObjects[a].completes++,smTagsObjects[a].latency=(new Date).getTime()-smTagsObjects[a].imptime):"AD_PLAY"==b?smTagsObjects[a].latency=(new Date).getTime()-smTagsObjects[a].starttime:"AD_VERIFY"==b?(smTagsObjects[a].verifys++,smTagsObjects[a].latency=(new Date).getTime()-smTagsObjects[a].imptime):"AD_REQUEST"==b?(smTagsObjects[a].starttime=(new Date).getTime(),smTagsObjects[a].requests++,smTagsObjects[a].latency=0,1==smTagsObjects[a].order&&smcounters.breakIndex++):"AD_ERROR"==b&&(smTagsObjects[a].errors++,smTagsObjects[a].latency=(new Date).getTime()-smTagsObjects[a].starttime)}function areWeGotViewability(){var a="unknown";try{var b=new smOpenAdViewability;ad_element=document.getElementById("sm_player"),b.checkViewability(ad_element,function(b){a=b.viewabiltyStatus,smoperational.percentViewable=b.percentViewable})}catch(a){}var c="";try{c=$sf.ext.inViewPercentage(),a=c>50,smoperational.percentViewable=c}catch(a){}smViewabilityMeasure.totalTime++,1==a?(smViewabilityMeasure.totalViewable++,smViewabilityMeasure.viewable2Seconds++):0==a&&(smViewabilityMeasure.viewable2Seconds=0),2e3/smoperational.viewabilityCheckInterval<=smViewabilityMeasure.viewable2Seconds&&0==smViewabilityMeasure.sentevent&&(smViewabilityMeasure.sentevent=1,SMreportEvent("VIEWABILITY","",smViewabilityMeasure.tagId))}function beautifyAreWeGotViewability(){return res={totalViewableTime:0,viewable:0,timeFromImp:0,visible:0,inFocus:0,percentViewable:0},res.totalViewableTime=Math.round(smViewabilityMeasure.totalViewable*smoperational.viewabilityCheckInterval/100)/10,res.viewable=smViewabilityMeasure.sentevent,res.timeFromImp=Math.round(smViewabilityMeasure.totalTime*smoperational.viewabilityCheckInterval/100)/10,res.inFocus="visible"==smoperational.visibilityState,res.visible=1==smoperational.viewability?"visible":"hidden",res.percentViewable=smoperational.percentViewable,res}function SMreportEvent(a,b,c){"IMPRESSION"==a&&(smStartMeasureViewability=setInterval(areWeGotViewability,smoperational.viewabilityCheckInterval),smViewabilityMeasure.tagId=c,smViewabilityMeasure.totalViewable=0,smViewabilityMeasure.viewable2Seconds=0,smViewabilityMeasure.sentevent=0,smViewabilityMeasure.totalTime=0),"COMPLETE"==a&&clearInterval(smStartMeasureViewability);var d="";b&&(d+=b);var e="";smReportThirdPartyPixel(a);try{var i,j,k,l,f=JSON.stringify(smMacrosList),g={},h=beautifyAreWeGotViewability(),m="",n=-1,p=((new Date).getTime(),0),q=smoperational.lastEvent;try{var r=Math.round(((new Date).getTime()-smoperational.startTime)/100)/10;if(j="s:"+smoperational.loopnumber+",servingScenario:"+smoperational.servingScenario+smMembers.screen,c){updatesmTagsObjects(c,a),p=smTagsObjects[c].order,m="("+c+")",n=smTagsObjects[c].latency;try{k=new smOpenAdViewability,l=document.getElementById("sm_player"),smOVAexeption="",k.checkViewability(l,function(a){e=a})}catch(a){e="error_viewability:"+a}try{e?(smoperational.viewability=e.viewabiltyStatus,smoperational.percentViewable=e.percentViewable):smoperational.viewability="unknown"}catch(a){smoperational.viewability="error"}e=JSON.stringify(h),g=JSON.stringify(h)}smcounters.eventsSentLog=smcounters.eventsSentLog+a+m+":"+r+",",i=smcounters.eventsSentLog;var s=i.length;s>250&&(i=i.substring(s-250,s))}catch(a){d=d+"error: "+a+" ",smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+" SMreportEvent1:"+a,printErrors("Error while msg:"+a)}finally{n>smcounters.latencyLimit&&(n=smcounters.latencyLimit)}try{j=getShortString(j,2*sminternalconfig.maxParamSize)}catch(a){smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+" dynamicThree:"+a}try{f+=getConsoleSummary(),randomNumber=Math.floor(100*Math.random());var t=0;smEventsDictionary[a]&&(t=smEventsDictionary[a])}catch(a){smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+" dynamicOne:"+a}""!=smcounters.smLogicErrorsCollection&&(d+=smcounters.smLogicErrorsCollection),""!=smcounters.windowErrorMessage&&(d="newScriptError:"+smcounters.windowErrorMessage);try{d=getShortString(d,2*sminternalconfig.maxParamSize),d=encodeURIComponent(d)}catch(a){smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+" msgEnc:"+a}if(randomNumber<t){smcounters.smLogicErrorsCollection="",smcounters.windowErrorMessage="";smCallURL(smoperational.eventUrl+"?eventType="+a+"&"+smStringParams+"samplingPercent="+t+"&randomNumber="+randomNumber+"&breakIndex="+smcounters.breakIndex+"&smTagId="+c+"&hftResponseType="+smoperational.hftResponseType+"&tagPriority="+p+"&smserveflash="+smcounters.serveFlash+"&smssl="+smoperational.ssl+"&smlatency="+n+"&visibility="+smoperational.viewability+":"+smoperational.visibilityState+":"+smoperational.servingScenario+"&clientVersion="+smoperational.clientVersion+"&waterfallString="+smoperational.waterfallStr+"&sessionId="+smoperational.sessionId+"&initts="+r+"&hftnumber="+smcounters.hftNumber+"&docReferrer="+smMembers.docReferrer+"&topLocation="+smMembers.topLocation+"&smwidth="+smoperational.width+"&smheight="+smoperational.height+"&message="+d+"&previouseventtype="+q+"&viewability="+g+"&smdynamic3="+j+"&smdynamic4="+e+"&smdynamic2="+i+"&smdynamic1="+f)}smcounters.lastEventTS=(new Date).getTime(),smoperational.lastEvent=a,printLogs("%c event= "+a+" tagId= "+c+" breakIndex= "+smcounters.breakIndex+" order= "+p+" time from start= "+r,"color: #0000FF")}catch(c){printErrors("Error while report event. event="+a+", msg="+b+", sampling="+t+", randomNumber="+randomNumber+", error="+c),smcounters.smLogicErrorsCollection=smcounters.smLogicErrorsCollection+" SMreportEvent2:"+c}}function getFlashVersion(){try{try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{a.AllowScriptAccess="always"}catch(a){return"6,0,0"}}catch(a){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(a){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(a){}}return"0,0,1"}function smConvertStringToObject(a,b){var c=[],d=[];-1!==a.indexOf("&")&&(c=a.split("&")),-1!==a.indexOf("?")&&(d=c[0].split("?")),-1!==a.indexOf("#")&&(d=c[0].split("#")),c.push(d[1]),c.shift();for(var e=0;e<c.length;e++){var f=c[e].split("=");b[f[0]]=f[1].toString()}}function smGetVisibilityState(){try{var a,b;void 0!==document.hidden?(b="visibilitychange",a="visibilityState"):void 0!==document.mozHidden?(b="mozvisibilitychange",a="mozVisibilityState"):void 0!==document.msHidden?(b="msvisibilitychange",a="msVisibilityState"):void 0!==document.webkitHidden&&(b="webkitvisibilitychange",a="webkitVisibilityState"),smoperational.visibilityState=document[a],document.addEventListener(b,function(){smoperational.visibilityState=document[a],"DYNAMIC"!=smoperational.hftResponseType||smoperational.isUserInteraction||SMreportEvent("UI",smoperational.visibilityState)},!1)}catch(a){smoperational.visibilityState="error"}}function smGetSessionSummary(){var a=0,b=0,c=0,d=0,e=0;for(var g in smTagsObjects)a=+smTagsObjects[g].requests,b=+smTagsObjects[g].impressions,c<smTagsObjects[g].impressions&&(c=smTagsObjects[g].impressions,d=smTagsObjects[g].requests,e=g);return"totalRequests="+a+" totalImpressions="+b+" bestTag="+e+" req="+d+" imps="+e}function smGetTagSummary(a){var b=smTagsObjects[a].requests,c=smTagsObjects[a].impressions,d=smTagsObjects[a].errors,e=smTagsObjects[a].verifys,f=smTagsObjects[a].completes,g="req="+b+" imp="+c+" ver="+e+" com="+f+" err="+d;return f>c&&(0==smcounters.sentImpDiscrepancy&&(smcounters.sentImpDiscrepancy++,SMreportEvent("LOGIC_ERROR","More completes then impressions for tag:"+a+" data:"+g)),g="invalidComplete"),g}function smOpenAdViewability(){try{var a=new OAVGeometryViewabilityCalculator,b={percentObscured:0,percentViewable:0,acceptedViewablePercentage:50,viewabiltyStatus:!1};this.checkViewability=function(a,d){c(a)&&(b.viewabiltyStatus=!0),d(b)};var c=function(a){var c=a.getBoundingClientRect();c.width,c.height;return!0!==e(a)&&(!0!==f(a)&&(d(a),!(b.percentViewable&&b.percentViewable<b.acceptedViewablePercentage)&&!!b.percentViewable))},d=function(c){b.percentObscured=b.percentObscured||0;var d=a.getViewabilityState(c,window);return d.error||(b.percentViewable=d.percentViewable-b.percentObscured),d},e=function(a){var b=window.getComputedStyle(a,null),c=b.getPropertyValue("visibility"),d=b.getPropertyValue("display");return"hidden"==c||"none"==d},f=function(a){var c=a.getBoundingClientRect(),d=12,e=c.left+d,f=c.right-d,h=c.top+d,i=c.bottom-d,j=Math.floor(c.left+c.width/2),k=Math.floor(c.top+c.height/2),l=[{x:e,y:h},{x:j,y:h},{x:f,y:h},{x:e,y:k},{x:j,y:k},{x:f,y:k},{x:e,y:i},{x:j,y:i},{x:f,y:i}];for(var m in l)if(l[m]&&l[m].x>=0&&l[m].y>=0&&(elem=document.elementFromPoint(l[m].x,l[m].y),null!=elem&&elem!=a&&!a.contains(elem)&&(overlappingArea=g(c,elem.getBoundingClientRect()),overlappingArea>0&&(b.percentObscured=100*g(c,elem.getBoundingClientRect()),b.percentObscured>b.acceptedViewablePercentage))))return b.percentViewable=100-b.percentObscured,!0;return!1},g=function(a,b){var c=a.width*a.height;return Math.max(0,Math.min(a.right,b.right)-Math.max(a.left,b.left))*Math.max(0,Math.min(a.bottom,b.bottom)-Math.max(a.top,b.top))/c}}catch(a){smOVAexeption="smOpenAdViewability="+a}}function OAVGeometryViewabilityCalculator(){this.getViewabilityState=function(d,e){try{var g,f=a();if(f.area==1/0)return{error:"Failed to determine viewport"};var h=d.getBoundingClientRect(),i=h.width*h.height,j=b(window.top),k=c(d,e);return f.area/i<.5?g=Math.floor(100*f.area/i):(k.bottom>j.height&&(k.height-=k.bottom-j.height),k.top<0&&(k.height+=k.top),k.left<0&&(k.width+=k.left),k.right>j.width&&(k.width-=k.right-j.width),g=Math.floor(k.width*k.height*100/i)),{clientWidth:j.width,clientHeight:j.height,objTop:h.top,objBottom:h.bottom,objLeft:h.left,objRight:h.right,percentViewable:g}}catch(a){smOVAexeption="this.getViewabilityState="+a}};var a=function(){try{for(var a=b(window),c=a.area,d=window;d!=window.top;)d=d.parent,viewPortSize=b(d),viewPortSize.area<c&&(c=viewPortSize.area,a=viewPortSize);return a}catch(a){smOVAexeption="getMinViewPortSize="+a}},b=function(a){try{var b={width:1/0,height:1/0,area:1/0};return!isNaN(a.document.body.clientWidth)&&a.document.body.clientWidth>0&&(b.width=a.document.body.clientWidth),!isNaN(a.document.body.clientHeight)&&a.document.body.clientHeight>0&&(b.height=a.document.body.clientHeight),a.document.documentElement&&a.document.documentElement.clientWidth&&!isNaN(a.document.documentElement.clientWidth)&&(b.width=a.document.documentElement.clientWidth),a.document.documentElement&&a.document.documentElement.clientHeight&&!isNaN(a.document.documentElement.clientHeight)&&(b.height=a.document.documentElement.clientHeight),a.innerWidth&&!isNaN(a.innerWidth)&&(b.width=Math.min(b.width,a.innerWidth)),a.innerHeight&&!isNaN(a.innerHeight)&&(b.height=Math.min(b.height,a.innerHeight)),b.area=b.height*b.width,b}catch(a){smOVAexeption="getViewPortSize="+a}},c=function(a,b){try{var e=b,f=b.parent,g={width:0,height:0,left:0,right:0,top:0,bottom:0};if(a){var h=d(a,b);if(h.width=h.right-h.left,h.height=h.bottom-h.top,g=h,e!=f){var i=c(e.frameElement,f);i.bottom<g.bottom&&(i.bottom<g.top&&(g.top=i.bottom),g.bottom=i.bottom),i.right<g.right&&(i.right<g.left&&(g.left=i.right),g.right=i.right),g.width=g.right-g.left,g.height=g.bottom-g.top}}return g}catch(a){smOVAexeption="getAssetVisibleDimension="+a}},d=function(a,b){try{var c=b,e=b.parent,f={left:0,right:0,top:0,bottom:0};if(a){var g=a.getBoundingClientRect();c!=e&&(f=d(c.frameElement,e)),f={left:g.left+f.left,right:g.right+f.left,top:g.top+f.top,bottom:g.bottom+f.top}}return f}catch(a){smOVAexeption="getPositionRelativeToViewPort="+a}}}function smGetStaticEnvVariables(){var a=location.protocol;"https:"==a?smoperational.ssl=1:"http:"==a?smoperational.ssl=0:(smoperational.validSession=!1,smoperational.sessionBreakReason=smMembers.protocol),getFlashVersion().split(",").shift()<11&&(smcounters.serveFlash=0);try{smMembers.topLocation=decodeURIComponent(top.location.href)}catch(a){smMembers.topLocation=null}if(!smMembers.topLocation||-1==smMembers.topLocation.indexOf("."))try{smMembers.topLocation=decodeURIComponent(window.location.href)+"&smLoc=window"}catch(a){printErrors("Error while init smdocReferrer from window.location.href"+a)}try{smMembers.docReferrer=decodeURIComponent(document.referrer)}catch(a){printErrors("Error while init smdocReferrer. "+a),smMembers.docReferrer="undefined"}if(smMembers.topLocation.indexOf("printsmlogs")>-1){sminternalconfig.logs=!0;for(key in smEventsDictionary)smEventsDictionary[key]=100}try{var b=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=screen.availHeight,e=screen.height,f=screen.width,g=screen.availWidth;smMembers.screen=" doc:"+b+"x"+c+",av:"+g+"x"+d+",res:"+f+"x"+e}catch(a){smMembers.screen="error"}}function smHandleMacros(){try{var a={},b=document.getElementById("sm_main_script");if(b&&smConvertStringToObject(b.src,a),a.cv&&delete a.cv,a.cname&&(sminternalconfig.domain=decodeURIComponent(a.cname),delete a.cname),a.protocol&&(sminternalconfig.protocol=decodeURIComponent(a.protocol),delete a.protocol),a.eventbase&&(sminternalconfig.eventbase=decodeURIComponent(a.eventbase),delete a.eventbase),a.serve_flash&&(smcounters.serveFlash=a.serve_flash,delete a.serve_flash),a.player_url&&(paramPlayerUrl=decodeURIComponent(a.player_url),smoperational.clientVersion=smoperational.clientVersion+"_"+paramPlayerUrl,delete a.player_url),a.click&&(0==a.click.indexOf("http")&&(smoperational.click=decodeURIComponent(a.click)),delete a.click),a.smQAmode){for(i in smEventsDictionary)smEventsDictionary[i]=100;delete a.smQAmode}smMacrosList=smCreateObjectContainsValues(a,"sm_macro_");for(d in a)0==d.indexOf("sm_macro_")&&delete a[d]}catch(a){SMreportEvent("LOGIC_ERROR","smHandleMacros:"+a)}var c=sminternalconfig.protocol+"://"+a.server+"."+sminternalconfig.domain+"/"+sminternalconfig.eventbase;smoperational.eventUrl=c+".evt",smoperational.hftUrl=c+".hft",delete a.server,delete a.cb,printLogs("smMacrosObject= "+JSON.stringify(a));try{a.declaredurl=decodeURIComponent(a.declaredurl)}catch(b){a.declaredurl="undefined"}-1==a.declaredurl.indexOf(".")&&(a.declaredurl=smHandleEmptyReportUrl());for(var d in a)a[d]=getShortString(a[d],sminternalconfig.maxParamSize);a.declaredurl=smHandleLongEncodingUrls(a.declaredurl);try{smStringParams=smConvertObjectToString(a)}catch(a){smStringParams="",smStringParams=b.src.slice(b.src.indexOf("?")+1)+"&",SMreportEvent("LOGIC_ERROR",a)}}function smHandleEmptyReportUrl(){var a="";try{var b={};smMembers.docReferrer&&smMembers.docReferrer.indexOf(".")>-1&&(smMembers.docReferrer.indexOf("?")>-1||smMembers.docReferrer.indexOf("#")>-1)&&smConvertStringToObject(smMembers.docReferrer,b),smMembers.topLocation&&smMembers.topLocation.indexOf(".")>-1&&(smMembers.topLocation.indexOf("?")>-1||smMembers.topLocation.indexOf("#")>-1)&&smConvertStringToObject(smMembers.topLocation,b),b.url?a=b.url:b.referrer?a=b.referrer:b.p&&(a=b.p),a=a.replace('unescape("',""),a=a.replace('")',"")}catch(b){a="undefined"}finally{return a}}function smHandleLongEncodingUrls(a){var b=encodeURIComponent(a),c=Math.floor(sminternalconfig.maxParamSize/5);return b.length>2*a.length&&(a=a.substring(0,c)),encodeURIComponent(a)}function initMembers(){printLogs("Start init  members"),smGetStaticEnvVariables(),smHandleMacros(),smGetVisibilityState(),smoperational.sessionId=createSessionId(25),smoperational.servingScenario=getServingScenarioType();for(var a in smMembers)smMembers[a]=getShortString(smMembers[a],sminternalconfig.maxParamSize);smMembers.docReferrer=smHandleLongEncodingUrls(smMembers.docReferrer),smMembers.topLocation=smHandleLongEncodingUrls(smMembers.topLocation),smoperational.timerInterval=setInterval(function(){var a=smGetSessionSummary();SMreportEvent("TIMER","loop="+smoperational.loopnumber+" "+a)},6e4)}function getHftResponseFromServer(a){if(smoperational.validSession){smcounters.hftNumber++;smCallURL(smoperational.hftUrl+"?"+smStringParams+"smserveflash="+smcounters.serveFlash+"&smssl="+smoperational.ssl+"&smlistsize="+smcounters.listsize+"&hftnumber="+smcounters.hftNumber+"&visibility="+smoperational.viewability+":"+smoperational.visibilityState+":"+smoperational.servingScenario+a+"&docReferrer="+smMembers.docReferrer+"&topLocation="+smMembers.topLocation+"&clientVersion="+smoperational.clientVersion+"&randomNumber="+randomNumber)}else SMreportEvent("LOGIC_ERROR","invalid session: "+smoperational.sessionBreakReason)}function buildHftResObject(a){function g(){smoperational.isUserInteraction=!0,f.removeEventListener("mouseenter",g,!1)}function h(){SMreportEvent("PLAYER_CLICK",""),f.removeEventListener("click",h,!1)}printLogs(JSON.stringify(a));var b=0,c=100;try{a.executionTime&&(b=a.executionTime,c=50)}catch(a){}var d=(new Date).getTime()-smoperational.startTime-b;if(d<c&&smcounters.hftNumber<2)return smoperational.clientVersion=smoperational.clientVersion+"low network latency:"+d+",exec time:"+b,void getHftResponseFromServer("&responseType=STATIC");if(!document.getElementById("sm_player")){var e=document.createElement("div");e.id="sm_player",e.style.width="300px",e.style.height="250px",document.body.appendChild(e)}var f=document.getElementById("sm_player");if(f.addEventListener("mouseenter",g,!1),f.addEventListener("click",h,!1),smMembers.sessionTTL=1e3*a.hftRefresh,smoperational.hftResponseType=a.responseType,smoperational.waterfallStr=a.waterfallId,smoperational.impressionPixel=a.impressionPixel,smoperational.clickPixel=a.clickPixel,smoperational.completePixel=a.completePixel,smoperational.loop=a.loopNumber,smoperational.width=a.width,smoperational.height=a.height,clearInterval(smcounters.hftRefreshInterval),"STATIC"!==a.responseType)smcounters.hftRefreshInterval=setInterval(function(){getHftResponseFromServer("")},smMembers.sessionTTL);else{clearInterval(smoperational.timerInterval);var i=smGetSessionSummary();SMreportEvent("SESSION_END","loop="+smoperational.loopnumber+" "+i)}smMainResponse=a;var j=(new Date).getTime();smCallURL((0==paramPlayerUrl.indexOf("http")?paramPlayerUrl:a.playerRecord.url)+"?cb="+j)}function parseHftResponseEvent(a){var b="";try{b=a.responseStatus,printLogs("Got HFT event from server. Start parsing HFT response. Status="+b),buildHftResObject(a),printLogs("Finished parse server HFT response. Status="+b)}catch(a){printErrors("Exception while parsing server HFT response. loading defaults. "+a),SMreportEvent("LOGIC_ERROR","Failed to parse erver HFT response. err="+a)}printLogs("Start init SR player immediately after getting response from server")}var smMainClientVersion="5.0.4.9",sminternalconfig={logs:!1,maxParamSize:200,maxUrlSize:2e3,domain:"selectmedia.asia",protocol:"https",eventbase:"vsf"},smEventsDictionary={PRE_INIT:100,CDN_CHECK:10,LOAD:100,UI:10,LOGIC_ERROR:100,PLAYER_CLICK:100,SETUP_ERROR:100,HFT:10,TIMER:10,PLAYER_ERROR:100,SESSION_END:100,AD_REQUEST:10,AD_PLAY:10,AD_ERROR:10,IMPRESSION:100,AD_VERIFY:100,COMPLETE:100,AD_CLICK:100,VIEWABILITY:100},smMacrosList={},smMainScript="",smPlayer=null,smMainResponse="",smoperational={validSession:!0,sessionBreakReason:"",clientVersion:smMainClientVersion,ssl:0,responseType:"",loopnumber:0,loop:0,lastEvent:"",startTime:(new Date).getTime(),adTagId:null,tagPriority:0,waterfallStr:"",hftResponseType:"",eventUrl:"",hftUrl:"",sessionId:"",visibilityState:"unknown",viewability:"unknown",impressionPixel:"",clickPixel:"",completePixel:"",click:"",isUserInteraction:!1,servingScenario:"",width:"",height:"",playerVersion:"",timerInterval:0,viewabilityCheckInterval:250,percentViewable:0},smcounters={breakIndex:0,lastTag:"",lastEventTS:(new Date).getTime(),eventsSentLog:"",serveFlash:1,latencyLimit:12e4,listsize:0,sentImpDiscrepancy:0,sentSetupError:0,hftNumber:0,counterErrors:0,counterWarnings:0,counterLogs:0,windowError:0,windowErrorMessage:"",smLogicErrorsCollection:"",hftRefreshInterval:0},smStringParams="",smMembers={screen:"",docReferrer:"",topLocation:"",sessionTTL:3e5},smTagsObjects={},paramPlayerUrl="";!function(){var a=console.error;console.error=function(){smcounters.counterErrors++,a.apply(this,Array.prototype.slice.call(arguments))}}(),function(){var a=console.warn;console.warn=function(){smcounters.counterWarnings++,a.apply(this,Array.prototype.slice.call(arguments))}}(),function(){var a=console.log;console.log=function(){smcounters.counterLogs++,a.apply(this,Array.prototype.slice.call(arguments))}}(),window.onerror=function(a,b,c,d,e){smcounters.windowError++,a&&(smcounters.windowErrorMessage=smcounters.windowErrorMessage+" m:"+a),b&&(smcounters.windowErrorMessage=smcounters.windowErrorMessage+" url:"+b.split("?")[0]),e&&(smcounters.windowErrorMessage=smcounters.windowErrorMessage+" error:"+e)};var smViewabilityMeasure={tagId:0,totalViewable:0,viewable2Seconds:0,sentevent:0,totalTime:0},smStartMeasureViewability=0,smOVAexeption="";try{initMembers(),SMreportEvent("PRE_INIT",""),getHftResponseFromServer(""),printLogs("*** Finished SelectMedia main script ***")}catch(a){printErrors("Error while executing SelectMedia main script. "+a)}